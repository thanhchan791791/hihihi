<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Upload ·∫£nh v√†o ImagesKhach - GitHub</title>
</head>
<body>
  <h2>üì§ Upload ·∫£nh v√†o th∆∞ m·ª•c <code>ImagesKhach</code> tr√™n GitHub</h2>

  <label for="token">üîë Nh·∫≠p GitHub Token:</label><br>
  <input type="password" id="token" placeholder="github_pat_..." style="width: 300px;"><br><br>

  <input type="file" id="fileInput" accept="image/*"><br><br>
  <button onclick="uploadImage()">üì§ T·∫£i ·∫£nh l√™n</button>

  <div id="result" style="margin-top: 20px;"></div>

  <script>
    const REPO_OWNER = 'thanhchan791791';
    const REPO_NAME = 'hihihi';
    const BRANCH = 'main';
    const IMAGE_FOLDER = 'ImagesKhach'; // ‚úÖ Folder ƒë√≠ch b·∫°n mu·ªën

    async function uploadImage() {
      const file = document.getElementById('fileInput').files[0];
      const token = document.getElementById('token').value.trim();

      if (!file || !token) {
        alert('‚ùó Vui l√≤ng ch·ªçn ·∫£nh v√† nh·∫≠p token.');
        return;
      }

      const reader = new FileReader();
      reader.onloadend = async () => {
        const base64Data = reader.result.split(',')[1];
        const fileName = file.name;

        const apiUrl = `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${IMAGE_FOLDER}/${fileName}`;

        const response = await fetch(apiUrl, {
          method: "PUT",
          headers: {
            "Authorization": `Bearer ${token}`,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            message: `Upload ${fileName} v√†o ${IMAGE_FOLDER}`,
            content: base64Data,
            branch: BRANCH
          })
        });

        const result = await response.json();
        if (response.ok) {
          const imageUrl = `https://raw.githubusercontent.com/${REPO_OWNER}/${REPO_NAME}/${BRANCH}/${IMAGE_FOLDER}/${fileName}`;
          document.getElementById('result').innerHTML = `
            ‚úÖ Upload th√†nh c√¥ng!<br>
            üîó <a href="${imageUrl}" target="_blank">${fileName}</a><br>
            <img src="${imageUrl}" style="max-width:300px; margin-top:10px;">
          `;
        } else {
          document.getElementById('result').innerHTML = `‚ùå L·ªói: ${result.message || 'Kh√¥ng r√µ l·ªói.'}`;
        }
      };
      reader.readAsDataURL(file);
    }
  </script>
</body>
</html>
