<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Upload ·∫£nh v√†o GitHub Repo (images/)</title>
</head>
<body>
  <h2>üì§ Upload ·∫£nh v√†o GitHub Repo: <code>hihihi/images/</code></h2>
  <input type="file" id="fileInput" accept="image/*" />
  <br><br>
  <button onclick="uploadImage()">T·∫£i ·∫£nh l√™n GitHub</button>
  <div id="result" style="margin-top:20px;"></div>

  <script>
    // ‚úÖ D√°n token th·∫≠t c·ªßa b·∫°n v√†o d√≤ng d∆∞·ªõi
    const GITHUB_TOKEN = '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';
    const REPO_OWNER = 'thanhchan791791';
    const REPO_NAME = 'hihihi';
    const BRANCH = 'main';
    const IMAGE_FOLDER = 'images';

    async function uploadImage() {
      const file = document.getElementById('fileInput').files[0];
      if (!file) return alert("Vui l√≤ng ch·ªçn m·ªôt ·∫£nh.");

      const reader = new FileReader();
      reader.onloadend = async () => {
        const base64Data = reader.result.split(',')[1];
        const fileName = file.name;
        const apiUrl = `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${IMAGE_FOLDER}/${fileName}`;

        const res = await fetch(apiUrl, {
          method: "PUT",
          headers: {
            "Authorization": `Bearer ${GITHUB_TOKEN}`,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            message: `upload ${fileName}`,
            content: base64Data,
            branch: BRANCH
          })
        });

        const result = await res.json();
        if (res.ok) {
          const imageUrl = `https://raw.githubusercontent.com/${REPO_OWNER}/${REPO_NAME}/${BRANCH}/${IMAGE_FOLDER}/${fileName}`;
          document.getElementById('result').innerHTML = `
            ‚úÖ Upload th√†nh c√¥ng!<br>
            üìé <a href="${imageUrl}" target="_blank">${fileName}</a><br>
            <img src="${imageUrl}" style="max-width:300px; margin-top:10px;">
          `;
        } else {
          document.getElementById('result').innerHTML = `‚ùå L·ªói: ${result.message}`;
        }
      };
      reader.readAsDataURL(file);
    }
  </script>
</body>
</html>
