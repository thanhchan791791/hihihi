<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Upload ·∫£nh l√™n GitHub</title>
</head>
<body>
  <h2>üñºÔ∏è Upload ·∫£nh v√†o repo GitHub (th∆∞ m·ª•c /images)</h2>
  <input type="file" id="fileInput" accept="image/*"><br><br>

  <label for="token">Nh·∫≠p GitHub Token:</label>
  <input type="password" id="token" placeholder="github_pat_..."><br><br>

  <button onclick="uploadImage()">üì§ T·∫£i ·∫£nh l√™n</button>

  <div id="result" style="margin-top:20px;"></div>

  <script>
    const REPO_OWNER = 'thanhchan791791';
    const REPO_NAME = 'hihihi';
    const BRANCH = 'main';
    const IMAGE_FOLDER = 'images';

    async function uploadImage() {
      const file = document.getElementById('fileInput').files[0];
      const token = document.getElementById('token').value.trim();

      if (!file || !token) {
        alert('Vui l√≤ng ch·ªçn ·∫£nh v√† nh·∫≠p token.');
        return;
      }

      const reader = new FileReader();
      reader.onloadend = async () => {
        const base64Data = reader.result.split(',')[1];
        const fileName = file.name;
        const apiUrl = `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${IMAGE_FOLDER}/${fileName}`;

        const res = await fetch(apiUrl, {
          method: "PUT",
          headers: {
            "Authorization": `Bearer ${token}`,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            message: `upload ${fileName}`,
            content: base64Data,
            branch: BRANCH
          })
        });

        const result = await res.json();
        if (res.ok) {
          const imageUrl = `https://raw.githubusercontent.com/${REPO_OWNER}/${REPO_NAME}/${BRANCH}/${IMAGE_FOLDER}/${fileName}`;
          document.getElementById('result').innerHTML = `
            ‚úÖ Upload th√†nh c√¥ng!<br>
            üîó <a href="${imageUrl}" target="_blank">${fileName}</a><br>
            <img src="${imageUrl}" style="max-width:300px; margin-top:10px;">
          `;
        } else {
          document.getElementById('result').innerHTML = `‚ùå L·ªói: ${result.message}`;
        }
      };
      reader.readAsDataURL(file);
    }
  </script>
</body>
</html>
