function xemAnh() {
  const name = document.getElementById("nameInput").value.trim().toLowerCase().replace(/\s+/g, '-');
  const sliderGallery = document.getElementById("sliderGallery");
  const sliderWrapper = document.getElementById("sliderWrapper");
  const thankYou = document.getElementById("thankYou");
  const loading = document.getElementById("loading");
  const loadingProgress = document.getElementById("loadingProgress");

  // Reset giao diện
  sliderWrapper.innerHTML = "";
  sliderGallery.style.display = "none";
  thankYou.style.display = "none";
  loadingProgress.style.display = "none";

  if (swiper) {
    swiper.destroy(true, true);
    swiper = null;
  }

  if (!name) {
    showError("Vui lòng nhập tên!");
    return;
  }

  loading.style.display = "flex";
  loadingProgress.style.display = "block";
  loadingProgress.innerText = "Đang tải ảnh...";

  db.ref("anhKhach/" + name).once("value").then(snapshot => {
    const urls = snapshot.val();

    if (urls && urls.length > 0) {
      // Tạo HTML swiper-slide từ mảng URL
      sliderWrapper.innerHTML = urls.map(url => 
        `<div class="swiper-slide"><img src="${url}" onclick="toggleZoom(this)" alt="Ảnh khách"/></div>`
      ).join('');

      // Hiển thị sau khi có HTML
      loading.style.display = "none";
      sliderGallery.style.display = "block";
      thankYou.style.display = "block";

      swiper = new Swiper(".mySwiper", {
        loop: true,
        pagination: { el: ".swiper-pagination", clickable: true },
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },
      });
    } else {
      showError("❌ Không tìm thấy ảnh!");
      loading.style.display = "none";
    }
  }).catch(err => {
    console.error(err);
    showError("⚠️ Lỗi khi truy cập dữ liệu!");
    loading.style.display = "none";
  });
}
